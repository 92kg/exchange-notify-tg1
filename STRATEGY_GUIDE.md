# 策略条件重要性分析

## 条件排序（按必要性从高到低）

### 1️⃣ 恐慌指数 ⭐⭐⭐⭐⭐ 【核心必要】

**作用**：作为买卖信号的基础判断条件
- 买入阈值：< 25（Extreme Fear）
- 卖出阈值：> 75（Extreme Greed）

**为什么核心？**
- ❌ 禁用后系统无法工作 (`signal.py:29-31`)
- 📊 Alternative.me API，业界标准
- ✅ 历史证明与市场顶底相关性高

**示例**：
```
恐慌指数 15 → 市场极度恐慌 → 历史多次见底
恐慌指数 85 → 市场极度贪婪 → 历史多次见顶
```

---

### 2️⃣ 拐点确认 ⭐⭐⭐⭐⭐ 【强烈推荐】

**作用**：防止在情绪恶化时过早入场

**原理**：
- 恐慌反转：恐慌指数连续上升（恐慌缓解）
- 贪婪反转：贪婪指数连续下降（贪婪缓解）

**为什么重要？**
```python
# signal.py:206-213
# ❌ 没有拐点确认
恐慌指数从 10 → 5 → 3（继续下跌）
→ 可能在 10 时就买入，结果继续跌

# ✅ 有拐点确认
恐慌指数从 10 → 15 → 20（开始回升）
→ 在 10 时不买，等待拐点确认后再买
```

**实际效果**：
- 减少"抄底抄在半山腰"的情况
- 避免在市场恶化时入场
- 降低30-40%的假信号

---

### 3️⃣ 资金费率分位数 ⭐⭐⭐ 【可选】

**作用**：检测衍生品市场过热/过冷

**原理**：
- 负费率：空头占主导（多头支付利息）→ 恐慌
- 正费率：多头占主导（空头支付利息）→ 贪婪
- 分位数：当前费率在历史中的位置

**为什么中等？**
✅ 优点：
- 与恐慌指数相互验证
- 实时反映衍生品情绪
- 极端值参考价值高

❌ 缺点：
- 仅基于7天数据 (`signal.py:226`)
- 样本量小（至少需要24条数据）
- 可能被交易所调整影响

**实际效果**：
```
资金费率 -0.02% (历史分位 8%) + 恐慌指数 20
→ 两个指标确认 → 强买入信号

资金费率 0.01% (历史分位 50%) + 恐慌指数 20
→ 仅恐慌指数确认 → 中等买入信号
```

---

### 4️⃣ 多空比 ⭐⭐ 【谨慎使用】

**作用**：检测账户多空持仓比例

**原理**：
- Long/Short < 0.8：空头主导（恐慌）
- Long/Short > 1.5：多头主导（贪婪）

**为什么较低？**
✅ 优点：
- 实时数据
- 反映真实资金方向

❌ 缺点：
- 容易被大户操纵
- 波动大，噪音多
- 数据源有限（部分交易所不提供）

**实际效果**：
```
多空比 0.5 (空头66% / 多头34%)
→ 可能真的恐慌，也可能是大户做空诱空
→ 参考价值有限
```

---

### 5️⃣ 共振检测 ⭐⭐ 【谨慎使用】

**作用**：多币种同时出现信号时增强强度

**原理**：
- 至少 N 个币种同时触发信号
- 升级信号强度：弱→中等→强→极强

**为什么较低？**
✅ 优点：
- 验证市场整体情绪
- 减少单一币种假信号

❌ 缺点：
- 监控币种少时无效
- 降低信号频率
- 可能错过独立行情

**实际效果**：
```
仅监控 BTC: 共振无法触发
监控 BTC + ETH + SOL: 共振可能触发
```

---

## 配置建议

### 🟢 保守策略（低风险，推荐新手）

**适用**：追求稳健，宁可错过机会也不愿亏损

```yaml
strategy:
  use_fear_greed: true       # ✅ 核心
  use_funding_percentile: false
  use_longshort: false
  use_reversal: true         # ✅ 强烈推荐
  use_resonance: false
```

**特点**：
- 条件数：2/5
- 风险：低
- 信号频率：中等
- 假信号率：低

**预期**：
- 年化收益：中等
- 最大回撤：小
- 适合：新手、稳健投资者

---

### 🟡 平衡策略（中等风险，推荐）

**适用**：平衡收益和风险

```yaml
strategy:
  use_fear_greed: true       # ✅ 核心
  use_funding_percentile: true   # ✅ 添加一个验证
  use_longshort: false
  use_reversal: true         # ✅ 强烈推荐
  use_resonance: false
```

**特点**：
- 条件数：3/5
- 风险：中等
- 信号频率：中等
- 假信号率：中等

**预期**：
- 年化收益：较高
- 最大回撤：中等
- 适合：有一定经验的投资者

---

### 🟠 激进策略（高风险）

**适用**：追求高收益，能承受较大波动

```yaml
strategy:
  use_fear_greed: true       # ✅ 核心
  use_funding_percentile: true
  use_longshort: true
  use_reversal: true         # ✅ 强烈推荐
  use_resonance: true
```

**特点**：
- 条件数：5/5
- 风险：高
- 信号频率：低
- 假信号率：可能过拟合

**预期**：
- 年化收益：不确定（可能很高，也可能亏损）
- 最大回撤：大
- 适合：成熟投资者

---

## 决策树

```
是否新手？
├─ 是 → 保守策略
│
└─ 否 → 能承受回撤？
    ├─ < 20% → 平衡策略
    │
    └─ > 20% → 激进策略
```

---

## 实战建议

### 1. 从保守开始
```yaml
# 第1-2个月：保守策略
use_fear_greed: true
use_reversal: true
其他: false
```

### 2. 逐步增加
```yaml
# 第3-4个月：添加资金费率
use_funding_percentile: true
```

### 3. 持续验证
```bash
python main.py --stats  # 查看回测结果
```

### 4. 根据结果调整
- 胜率 < 50%：减少条件
- 胜率 > 70%：可能过拟合
- 样本 < 30：数据不足，暂不调整

---

## 注意事项

### ⚠️ 过拟合信号
- 胜率 > 80%
- 样本量 < 30
- 信号频率极低
- 买卖严重失衡

### ✅ 健康信号
- 胜率 50-70%
- 样本量 > 50
- 买卖比 1:1 到 2:1
- 收益稳定波动小
